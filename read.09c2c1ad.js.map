{"mappings":"AAAA,IAAIA,EAAQ,IAAIC,KAEdD,EAAME,UAAY,GACdF,EAAME,UAAUC,WAAWC,SAAS,EAAG,GACvCJ,EAAME,UAEVF,EAAMK,WAAa,IACdL,EAAMK,WAAa,GAAGF,WAAWC,SAAS,EAAG,GAC9CJ,EAAMK,WACCL,EAAMM,cARnB,MAWMC,EAAgBC,SAASC,cAAc,iBAEzCC,aAAaC,QAAQ,SAQHC,KAAKC,MAAMH,aAAaC,QAAQ,SAEjDG,MAAK,CAACC,EAAMC,IAASD,EAAKE,cAAcD,KACxCE,SAAQC,IACP,MAAMC,EAAWD,GAMvB,SAA+BE,EAAWC,GACxC,MAAMC,EAAWF,EACdG,KACCC,GAAQ,wEACyBA,EAAKC,8IAEPD,EAAKE,qEACYF,EAAKG,mEACvBH,EAAKI,kDACJJ,EAAKK,4EAEPL,EAAKM,YAAYN,EAAKO,sDACdP,EAAKQ,8FAI3CC,KAAK,IAERC,YAAW,KACJzB,aAAaC,QAAQ,cAGNH,SAAS4B,iBAAiB,YAClClB,SAAQO,IAEhBb,KAAKC,MAAMH,aAAaC,QAAQ,cAAc0B,MAAKC,GAC1CA,EAAKC,MAAQC,OAAOf,EAAKgB,QAAQb,QAG1CH,EAAKiB,UAAUC,IAAI,iBACnBlB,EAAKiB,UAAUE,OAAO,kBACtBnB,EAAKoB,YAAc,uB,GAErB,GACD,KACH,MAAMC,EAAS,2FAEUxB,6GAGYC,eACrChB,EAAcwC,mBAAmB,YAAaD,E,CA7C1CE,CADqBpC,KAAKC,MAAMH,aAAaC,QAAQ,GAAGQ,MACpBC,EAAS,IAVnDb,EAAc0C,iBAAiB,SA0D/B,SAA4BC,GAC1B,IAAKA,EAAEC,OAAOT,UAAUU,SAAS,YAC/B,OAGF,GAAIF,EAAEC,OAAOT,UAAUU,SAAS,aAI9B,OAHAF,EAAEC,OAAOE,WAAWC,mBAAmBZ,UAAUC,IAAI,mBACrDO,EAAEC,OAAOT,UAAUE,OAAO,kBAC1BM,EAAEC,OAAOT,UAAUC,IAAI,WAIrBO,EAAEC,OAAOT,UAAUU,SAAS,aAC9BF,EAAEC,OAAOE,WAAWC,mBAAmBZ,UAAUE,OAAO,mBACxDM,EAAEC,OAAOT,UAAUE,OAAO,WAC1BM,EAAEC,OAAOT,UAAUC,IAAI,a,IAxE3BpC,EAAc0C,iBAAiB,QAASM","sources":["src/js/already-read.js"],"sourcesContent":["let today = new Date();\nconst date =\n  today.getDate() < 10\n    ? today.getDate().toString().padStart(2, 0)\n    : today.getDate();\nconst month =\n  today.getMonth() < 10\n    ? (today.getMonth() + 1).toString().padStart(2, 0)\n    : today.getMonth() + 1;\nconst year = today.getFullYear();\nconst dateKey = `${date}/${month}/${year}`;\n\nconst readWrapperEl = document.querySelector('.read-wrapper');\n\nif (localStorage.getItem('read')) {\n  updateMarkup();\n}\n\nreadWrapperEl.addEventListener('click', handleHideBtnClick);\nreadWrapperEl.addEventListener('click', handleReadMoreBtnClick);\n\nfunction updateMarkup() {\n  const localKeyArr = JSON.parse(localStorage.getItem('read'));\n  localKeyArr\n    .sort((prev, next) => prev.localeCompare(next))\n    .forEach(element => {\n      const dateNews = element;\n      const localNewsArr = JSON.parse(localStorage.getItem(`${element}`));\n      createMarkupFromLocal(localNewsArr, dateNews);\n    });\n}\n\nfunction createMarkupFromLocal(newsArrey, newsArrDate) {\n  const liMarkup = newsArrey\n    .map(\n      item => ` <li class=\"images read-item\">\n    <img class=\"news-list__img\" src=\"${item.imgUrl}\" alt=\"\" width=\"288px\" height=\"395px\" />\n    <p class=\"have-read visually-hidden\">Have Read</p>\n    <p class=\"news-list__category\">${item.category}</p>\n    <button class=\"img-btn favorite-false\" data-id=\"${item.id}\">Add to favorite</button>\n    <h2 class=\"description-title\">${item.title}</h2>\n    <p class=\"description-of-news\">${item.descr}</p>\n    <div class=\"info-more\">\n      <p class=\"date\" data-date=\"${item.dateKey}\">${item.date}</p>\n      <a class=\"already-read-link\" href=\"${item.originUrl}\" target=\"_blank\" rel=\"noopener noreferrer\">Read more</a>\n    </div>\n    </li>`\n    )\n    .join('');\n\n  setTimeout(() => {\n    if (!localStorage.getItem('savedNews')) {\n      return;\n    }\n    const favoriteBtn = document.querySelectorAll('.img-btn');\n    favoriteBtn.forEach(item => {\n      if (\n        JSON.parse(localStorage.getItem('savedNews')).find(elem => {\n          return elem.uri === String(item.dataset.id);\n        })\n      ) {\n        item.classList.add('favorite-true');\n        item.classList.remove('favorite-false');\n        item.textContent = 'Remove from favorite';\n      }\n    });\n  }, 500);\n  const markup = `<div class=\"read-list-box\">\n    <div class=\"read-box-inner\">\n    <p class=\"read-date\">${newsArrDate}</p>\n    <button class=\"read-btn roll-down\">\n    </button></div>\n    <ul class=\"news__list read-list\">${liMarkup}</ul></div>`;\n  readWrapperEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction handleHideBtnClick(e) {\n  if (!e.target.classList.contains('read-btn')) {\n    return;\n  }\n\n  if (e.target.classList.contains('roll-down')) {\n    e.target.parentNode.nextElementSibling.classList.add('visually-hidden');\n    e.target.classList.remove('roll-down');\n    e.target.classList.add('roll-up');\n    return;\n  }\n\n  if (e.target.classList.contains('roll-up')) {\n    e.target.parentNode.nextElementSibling.classList.remove('visually-hidden');\n    e.target.classList.remove('roll-up');\n    e.target.classList.add('roll-down');\n  }\n}\n\n// function handleReadMoreBtnClick(e) {\n//   if (e.target.classList.contains('already-read-link')) {\n//     const newsId = e.target.parentNode.parentNode.children[3].dataset.id;\n//     e.target.parentNode.parentNode.children[1].classList.remove(\n//       'visually-hidden'\n//     );\n//     const newsReadingDate = e.target.previousElementSibling.dataset.date;\n//     const localArr = JSON.parse(localStorage.getItem(`${newsReadingDate}`));\n//     const newsItem = localArr.find(item => item.id === newsId);\n//     const indexOfNews = localArr.indexOf(newsItem);\n//     console.log('localArr', localArr);\n//     localArr.splice(indexOfNews, 1);\n\n//     console.log('newsReadingDate', newsReadingDate);\n//     console.log('newsItem', newsItem);\n//     console.log('indexOfNews', indexOfNews);\n//     console.log('localArr after splice', localArr);\n\n//     localStorage.setItem(`${newsReadingDate}`, JSON.stringify(localArr));\n//     newsItem.dateKey = dateKey;\n\n//     if (localStorage.getItem(`${dateKey}`)) {\n//       const fromLocal = JSON.parse(localStorage.getItem(`${dateKey}`));\n//       fromLocal.push(newsItem);\n//       localStorage.setItem(`${dateKey}`, JSON.stringify(fromLocal));\n//       // updateMarkup();\n//     } else {\n//       localStorage.setItem(`${dateKey}`, JSON.stringify(newsItem));\n//       // updateMarkup();\n//     }\n//   }\n// }"],"names":["$8e1e98776cac812c$var$today","Date","getDate","toString","padStart","getMonth","getFullYear","$8e1e98776cac812c$var$readWrapperEl","document","querySelector","localStorage","getItem","JSON","parse","sort","prev","next","localeCompare","forEach","element","dateNews","newsArrey","newsArrDate","liMarkup","map","item","imgUrl","category","id","title","descr","dateKey","date","originUrl","join","setTimeout","querySelectorAll","find","elem","uri","String","dataset","classList","add","remove","textContent","markup","insertAdjacentHTML","$8e1e98776cac812c$var$createMarkupFromLocal","addEventListener","e","target","contains","parentNode","nextElementSibling","handleReadMoreBtnClick"],"version":3,"file":"read.09c2c1ad.js.map"}