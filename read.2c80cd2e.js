let e=new Date;const t=`${e.getDate()<10?e.getDate().toString().padStart(2,0):e.getDate()}/${e.getMonth()<10?(e.getMonth()+1).toString().padStart(2,0):e.getMonth()+1}/${e.getFullYear()}`,a=document.querySelector(".read-wrapper");function s(){JSON.parse(localStorage.getItem("read")).sort(((e,t)=>e.localeCompare(t))).forEach((e=>{const t=e;!function(e,t){const s=e.map((e=>` <li class="images read-item">\n    <img class="news-list__img" src="${e.imgUrl}" alt="" width="288px" height="395px" />\n    <p class="have-read visually-hidden">Have Read</p>\n    <p class="news-list__category">${e.category}</p>\n    <button class="img-btn favorite-false" data-id="${e.id}">Add to favorite</button>\n    <h2 class="description-title">${e.title}</h2>\n    <p class="description-of-news">${e.descr}</p>\n    <div class="info-more">\n      <p class="date" data-date="${e.dateKey}">${e.date}</p>\n      <a class="already-read-link" href="${e.originUrl}" target="_blank" rel="noopener noreferrer">Read more</a>\n    </div>\n    </li>`)).join("");setTimeout((()=>{if(!localStorage.getItem("savedNews"))return;document.querySelectorAll(".img-btn").forEach((e=>{JSON.parse(localStorage.getItem("savedNews")).find((t=>t.uri===String(e.dataset.id)))&&(e.classList.add("favorite-true"),e.classList.remove("favorite-false"),e.textContent="Remove from favorite")}))}),500);const l=`<div class="read-list-box">\n    <div class="read-box-inner">\n    <p class="read-date">${t}</p>\n    <button class="read-btn roll-down">\n    </button></div>\n    <ul class="news__list read-list">${s}</ul></div>`;a.insertAdjacentHTML("beforeend",l)}(JSON.parse(localStorage.getItem(`${e}`)),t)}))}localStorage.getItem("read")&&s(),a.addEventListener("click",(function(e){if(!e.target.classList.contains("read-btn"))return;if(e.target.classList.contains("roll-down"))return e.target.parentNode.nextElementSibling.classList.add("visually-hidden"),e.target.classList.remove("roll-down"),void e.target.classList.add("roll-up");e.target.classList.contains("roll-up")&&(e.target.parentNode.nextElementSibling.classList.remove("visually-hidden"),e.target.classList.remove("roll-up"),e.target.classList.add("roll-down"))})),a.addEventListener("click",(function(e){if(e.target.classList.contains("already-read-link")){const l=e.target.parentNode.parentNode.children[3].dataset.id;e.target.parentNode.parentNode.children[1].classList.remove("visually-hidden");const r=e.target.previousElementSibling.dataset.date,n=JSON.parse(localStorage.getItem(`${r}`)),o=n.find((e=>e.id===l)),i=n.indexOf(o);if(console.log("localArr",n),n.splice(i,1),console.log("newsReadingDate",r),console.log("newsItem",o),console.log("indexOfNews",i),console.log("localArr after splice",n),localStorage.setItem(`${r}`,JSON.stringify(n)),o.dateKey=t,localStorage.getItem(`${t}`)){const e=JSON.parse(localStorage.getItem(`${t}`));e.push(o),localStorage.setItem(`${t}`,JSON.stringify(e)),a.innerHTML="",s()}else localStorage.setItem(`${t}`,JSON.stringify(o)),a.innerHTML="",s()}}));
//# sourceMappingURL=read.2c80cd2e.js.map
